<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <script type="text/javascript" src="..\src\js\login_register.js"></script>
    <link rel="stylesheet" href="../src/css/login_register.css">
</head>

<body>
    <div class="title">
        <div class="bk">
            <div class="title_text select" id="login_text" onclick="checkout(this.id)">
                <p class="text">登录</p>
            </div>
            <div class="title_text notselect" id="register_text" onclick="checkout(this.id)">
                <p class="text">注册</p>
            </div>
        </div>
    </div>
    <!-- 验证码登录 -->
    <div id="login">
        <form id="form" onsubmit="return false" action="##" method="post">
            <div class="content_login" >       
                <div class="part1">
                    <img src="../src/img/phone.png" class="phone_img">
                    <input placeholder="请输入登录手机号码" style="border:0px;" name="user_phone" class="user_phone"></input>
                </div>
                <div class="part1">
                    <img src="../src/img/number.png" class="number_img">
                    <input placeholder="请输入手机验证码" style="border:0px;" name="verifyCode"></input>              
                </div>
                <button type="button" class="gain_num"><p class="gain_text" onclick="login()">获取验证码</p></button>
                <button type="button" class="gain_num"><p class="gain_text" onclick="login0()">登录</p></button>
            </div>
            <div class="end">
                <a id="login_pas"  onclick="turn_off(this.id)">密码登录</a>
            </div>
        </form>
    </div>

    <!-- 密码登录 -->
    <div id="login_paswd">
        <form id="form1" onsubmit="return false" action="##" method="post">
            <div class="content_login">   
                <div class="part1">
                    <img src="../src/img/phone.png" class="phone_img">
                    <input placeholder="请输入登录手机号码" style="border:0px;" name="user_phone" class="user_phone"></input>
                </div>
                <div class="part1">
                    <img src="../src/img/number.png" class="number_img">
                    <input id="input_paswd" placeholder="请输入登录密码" style="border:0px;" type="password" name="user_password"></input>
                    <img src="../src/img/visible.png" id="visible_img" class="paswd_img" onclick="hideShowPsw()">             
                </div>
                <button type="button" class="gain_num" onclick="login1()"><p class="gain_text">登录</p></button>
            </div>
        </form>
        <div class="end">
            <a id="login_pas1"  onclick="turn_off(this.id)">忘记密码</a>
        </div>
    </div>

    <!-- 注册界面 -->
    <div id="register">
        <form id="form2" onsubmit="return false" action="##" method="post">
            <div class="content_register">       
                    <div class="part1">
                        <img src="../src/img/phone.png" class="phone_img">
                        <input placeholder="请输入登录手机号码" style="border:0px;" name="user_phone" class="user_phone"></input>
                    </div>
                    <div class="part1">
                        <img src="../src/img/number.png" class="number_img">
                        <input placeholder="请输入手机验证码" style="border:0px;" name="verifyCode"></input>              
                    </div>
                    <div class="part1">
                        <img src="../src/img/number.png" class="number_img">
                        <input id="input_paswd1" placeholder="请输入登录密码" style="border:0px;" type="password" name="user_password"></input>
                        <img src="../src/img/visible.png" id="visible_img1" class="paswd_img" onclick="hideShowPsw1()">             
                    </div>
                    <button type="button" class="gain_num"><p class="gain_text" onclick="login2()">获取验证码</p></button>
                    <button type="button" class="gain_num"><p class="gain_text" onclick="login3()">登录</p></button>
            </div>
        </form>
    </div>
</body>
</html>
<script src="..\src\modules\jquery\jquery-3.3.1.min.js"></script>
<script src="../src/js/Jsbridge.js"></script>

<script type="text/javascript">

    function login() {
        var url = $('.user_phone').val();
        $.ajax({
        //几个参数需要注意一下
            type: "post",//方法类型
            dataType: "json",//预期服务器返回的数据类型
            url: "http://10.28.129.193:8080/QingzaoReading/sendSms",
            data: $('#form .user_phone').serialize(),
            success: function (result) {
                console.log(result);//打印服务端返回的数据(调试用)

            },
            error : function() {
                alert("异常！");
            }
        });
    }

    function login0() {
        var url = $('.user_phone').val();
        $.ajax({
        //几个参数需要注意一下
            type: "post",//方法类型
            dataType: "json",//预期服务器返回的数据类型
            url: "http://10.28.129.193:8080/QingzaoReading/register",
            data: $('#form').serialize(),
            success: function (result) {
                console.log(result);//打印服务端返回的数据(调试用)

            },
            error : function() {
                alert("异常！");
            }
        });
    }


    function login1() {
        var url = $('.user_phone').val();
        $.ajax({
        //几个参数需要注意一下
            type: "post",//方法类型
            dataType: "json",//预期服务器返回的数据类型
            url: "http://10.28.129.193:8080/QingzaoReading/loginbypassword/",
            data: $('#form1').serialize(),
            success: function (result) {
                console.log(result);//打印服务端返回的数据(调试用)

                console.log(JSON.stringify(result));//打印服务端返回的数据(调试用)
                JsBridge.callHandler(
                'password_login', { //接受分类，切换activity
                    'user_phone': JSON.stringify(result),
                },
                function (responseData) {
                    console.log(responseData);
                }
            );
                alert("SUCCESS");
                if (result.resultCode == 200) {
                    alert("SUCCESS");
                }
                ;
            },
            error : function() {
                alert("异常！");
            }
        });
    }

    function login2() {
        var url = $('.user_phone').val();
        $.ajax({
        //几个参数需要注意一下
            type: "post",//方法类型
            dataType: "json",//预期服务器返回的数据类型
            url: "http://10.28.129.193:8080/QingzaoReading/sendSms",
            data: $('#form2 .user_phone').serialize(),
            success: function (result) {
                console.log(result);//打印服务端返回的数据(调试用)
            },
            error : function() {
                alert("异常！");
            }
        });
    }


    function login3() {
        console.log($('#form2').serialize());

        $.ajax({
        //几个参数需要注意一下
            type: "post",//方法类型
            async : true,
            dataType: "json",//预期服务器返回的数据类型
            url: "http://10.28.129.193:8080/QingzaoReading/register",
            data: $('#form2').serialize(),
            //data: data,
            success: function (result) {
                console.log(result);//打印服务端返回的数据(调试用)
            },
            error : function() {
                alert("异常！");
            }
        });
    }
</script>